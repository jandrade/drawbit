/*! drawbit v1.0.0 2013-10-05 */
function round(a){return.5+a<<0}!function(a){"use strict";a.Alphabit=function(a){function b(){i=document.createElement("img"),i.addEventListener("load",e),i.addEventListener("error",f),i.src=k.image}function c(a){for(var b=0,c=0,d=[],e=[],f=0;b<k.width;b++){for(d=[],c=0;c<k.height;c++)d.push(f);e.push(d)}j[a]=e}function d(){var a,b=0,c=0,d=0,e=0,f=[],m=[],n=0;g.width=i.width,g.height=i.height,h.drawImage(i,0,0,i.width,i.height);var o=h.getImageData(0,0,g.width,g.height).data;for(a=o.length;a>b;b+=4)n=[o[b],o[b+1],o[b+2],o[b+3]].toString()===k.color?1:0,m.push(n),d++,0===d%k.width&&(f.push(m),m=[],c++,0===c%(k.height+k.padding)&&(j[l[e]]=f,f=[],e++));"function"==typeof k.onComplete&&k.onComplete()}function e(){d()}function f(){console.log("Error loading alphabet.png")}var g,h,i,j={},k={padding:1,width:7,height:7,color:"0,0,0,255",image:"img/alphabet.png",onComplete:function(){}},l=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];return function(){Object.extend(k,a),g=document.createElement("canvas"),h=g.getContext("2d"),c("space"),c("delete"),b()}(),j}}(window.db=window.db||{}),function(a){"use strict";a.Config=function(a){function b(){c=a,console.log("data: ",c)}var c;return function(){b()}(),{}}}(window.db=window.db||{}),function(a){"use strict";a.Effect=function(b,c,d){function e(){h=window.requestAnimationFrame(f)}function f(){g(),h&&!i&&window.requestAnimationFrame(f)}function g(){var a=l.length;for(k>=a&&(i=!0);a-->0;)l[a]&&!l[a].complete()&&(l[a].update(),l[a]&&l[a].complete()&&k++)}var h,i,j="tile",k=0,l=[],m=d||1e3;return function(){for(var d=b.tiles.length;d-->0;)l.push(new a.effects[c.type](b.tiles[d],b.context,c,m));c.delay?setTimeout(e,c.delay):e()}(),{id:j,next:g}}}(window.db=window.db||{}),function(a){"use strict";a.effects=a.effects||{},a.effects.Fade=function(a,b,c,d){function e(){h=!1,j=10}function f(){b.clearRect(a.x,a.y,a.width,a.height),b.fillStyle="rgba("+a.color+","+j/10+")",b.fillRect(a.x,a.y,a.width,a.height),0>=j&&(h=!0),j-=i}function g(){return h}var h,i=600/d,j=10;return function(){e(),f()}(),{update:f,complete:g}}}(window.db=window.db||{}),function(a){"use strict";a.effects=a.effects||{},a.effects.Flip=function(a,b,c){function d(){k={t:0,b:0,tl:0,bl:0,tr:0,br:0},b.fillStyle=n?c.back:a.color,i=0,g=!1,h=!1}function e(d){b.clearRect(a.x,a.y,a.width,a.height),!g&&k.b<k.t&&(m=m===a.color?c.back:a.color,b.fillStyle=m,g=!0,"function"==typeof d&&d()),g?(k.t=a.y+a.height-i,k.b=a.y+i,k.tl=a.x+a.width-i,k.bl=a.x,k.br=a.x+a.width,k.tr=a.x+i):(k.t=a.y+i,k.b=a.y+a.height-i,k.tl=a.x,k.bl=a.x+i,k.tr=a.x+a.width,k.br=a.x+a.width-i),b.beginPath(),b.moveTo(k.tl,k.t),b.lineTo(k.bl,k.b),b.lineTo(k.br,k.b),b.lineTo(k.tr,k.t),b.closePath(),b.fill(),g&&j===JSON.stringify(k)&&(h=!0,n=!0),i+=l}function f(){return h}var g,h,i=0,j={},k={},l=.5,m=a.color,n=!1;return function(){d(),e(),j=JSON.stringify(k)}(),{update:e,complete:f}}}(window.db=window.db||{}),function(a){"use strict";a.Grid=function(b){function c(){var b=new a.Layer("layer_"+f.length,g,h);e.appendChild(b.element),f.push(b),a.Tools.layer=b.id}function d(a){for(var b,c=f.length;c-->0;)if(f[c].id===a){b=f[c];break}return b}var e,f=[],g=300,h=300;return function(){e=document.querySelector(b)}(),{element:e,addLayer:c,getLayer:d,width:g,height:h}}}(window.db=window.db||{}),function(a){"use strict";a.gui=a.gui||{},a.gui.App=function(){var b;return function(){b=new a.gui.Layers(".db-layers")}(),{layers:b}}}(window.db=window.db||{}),function(a){"use strict";a.gui=a.gui||{},a.gui.Layers=function(b){function c(a){var b=document.createElement("a"),c=document.createElement("li");b.href="#"+a,b.innerHTML=a,c.appendChild(b),f.appendChild(c),d()}function d(){h=f.querySelectorAll("li a");for(var b=h.length;b-->0;)h[b].removeEventListener(TouchEvent.CLICK,e),h[b].addEventListener(TouchEvent.CLICK,e);g.innerHTML=a.Tools.layer}function e(b){b.preventDefault(),a.Tools.layer=b.currentTarget.getAttribute("href").replace("#",""),g.innerHTML=a.Tools.layer}var f,g,h=[];return function(){f=document.querySelector(b+" ul"),g=document.querySelector("h3 strong"),g.innerHTML=a.Tools.layer,h=f.querySelectorAll("li")}(),{add:c}}}(window.db=window.db||{}),function(a){"use strict";a.Layer=function(b,c,d){function e(a){for(var b,c=k.length;c-->0;)if(k[c]&&k[c].id===a){b=c;break}return b}function f(b,c){var d=e("tile_"+b+"_"+c);if(isNaN(d)){var f=new a.Tile(j,{x:b,y:c,color:a.Tools.color});k.push(f)}}function g(a){for(var b,c,d=a.length,e=a[0]?a[0].length:0,g=0,h=0;d>g;g++)for(h=0;e>h;h++)b=a[g][h],1===b&&(c=.5+15*Math.random()<<0,f(l+h,m+g));l+=e,l+e>30&&(m+=d,l=0)}function h(a,b){var c=e("tile_"+a+"_"+b);"undefined"!=typeof c&&(k[c].dispose(),k.splice(c,1))}var i,j,k=[],l=0,m=0;return function(){i=document.createElement("canvas"),i.id=b,i.width=c,i.height=d,j=i.getContext("2d")}(),{id:b,element:i,context:j,draw:f,erase:h,drawPath:g,tiles:k}}}(window.db=window.db||{}),function(a){"use strict";a.Tile=function(a,b){function c(){a.clearRect(g,h,e,f)}var d="tile",e=10,f=10,g=0,h=0,i=1,j=b.color||"200,200,200",k=1;return function(){d=b.id||"tile_"+b.x+"_"+b.y,g=b.x*e+i*b.x,h=b.y*f+i*b.y,a.fillStyle="rgba("+j+","+k+")",a.fillRect(g,h,e,f)}(),{id:d,color:j,context:a,width:e,height:f,x:g,y:h,dispose:c}}}(window.db=window.db||{}),function(a){"use strict";a.Tools=function(){var a="200,200,200",b=!1,c="layer_0";return{color:a,erase:b,layer:c}}()}(window.db=window.db||{});var TouchEvent="ontouchstart"in document.documentElement?{START:"touchstart",MOVE:"touchmove",CLICK:"touchend",END:"touchend"}:{START:"mousedown",MOVE:"mousemove",CLICK:"click",END:"mouseup"};Element.prototype.addEventListener||(Element.prototype.addEventListener=function(a,b){return this.attachEvent&&this.attachEvent("on"+a,b),this}),Object.extend=function(a,b){for(var c in b)a[c]=b[c];return a};